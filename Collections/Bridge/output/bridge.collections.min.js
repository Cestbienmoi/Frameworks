(function(){"use strict";Bridge.define("Bridge.Collections.BitArray",{inherits:[Bridge.ICollection,Bridge.ICloneable],statics:{BitsPerInt32:32,BytesPerInt32:4,BitsPerByte:8,_ShrinkThreshold:256,getArrayLength:function(n,t){return n>0?(Bridge.Int.div(n-1|0,t)|0)+1|0:0}},m_array:null,m_length:0,_version:0,constructor$3:function(n){Bridge.Collections.BitArray.prototype.constructor$4.call(this,n,!1)},constructor$4:function(n,t){var r,i;if(n<0)throw new Bridge.ArgumentOutOfRangeException("length","Index is less than zero.");for(this.m_array=Bridge.Array.init(Bridge.Collections.BitArray.getArrayLength(n,Bridge.Collections.BitArray.BitsPerInt32),0),this.m_length=n,r=t?-1:0,i=0;i<this.m_array.length;i=i+1|0)this.m_array[i]=r;this._version=0},constructor$1:function(n){var i,t,r;if(n==null)throw new Bridge.ArgumentNullException("bytes");if(n.length>268435455)throw new Bridge.ArgumentException(Bridge.String.format("The input array length must not exceed Int32.MaxValue / {0}. Otherwise BitArray.Length would exceed Int32.MaxValue.",Bridge.Collections.BitArray.BitsPerByte),"bytes");for(this.m_array=Bridge.Array.init(Bridge.Collections.BitArray.getArrayLength(n.length,Bridge.Collections.BitArray.BytesPerInt32),0),this.m_length=n.length*Bridge.Collections.BitArray.BitsPerByte|0,i=0,t=0;(n.length-t|0)>=4;)this.m_array[Bridge.identity(i,i=i+1|0)]=n[t]&255|(n[t+1|0]&255)<<8|(n[t+2|0]&255)<<16|(n[t+3|0]&255)<<24,t=t+4|0;r=n.length-t|0;r===3&&(this.m_array[i]=(n[t+2|0]&255)<<16,r=2);r===2&&(this.m_array[i]=this.m_array[i]|(n[t+1|0]&255)<<8,r=1);r===1&&(this.m_array[i]=this.m_array[i]|n[t]&255);this._version=0},constructor:function(n){if(n==null)throw new Bridge.ArgumentNullException("values");this.m_array=Bridge.Array.init(Bridge.Collections.BitArray.getArrayLength(n.length,Bridge.Collections.BitArray.BitsPerInt32),0);this.m_length=n.length;for(var t=0;t<n.length;t=t+1|0)n[t]&&(this.m_array[Bridge.Int.div(t,32)|0]=this.m_array[Bridge.Int.div(t,32)|0]|1<<t%32);this._version=0},constructor$5:function(n){if(n==null)throw new Bridge.ArgumentNullException("values");if(n.length>67108863)throw new Bridge.ArgumentException(Bridge.String.format("The input array length must not exceed Int32.MaxValue / {0}. Otherwise BitArray.Length would exceed Int32.MaxValue.",Bridge.Collections.BitArray.BitsPerInt32),"values");this.m_array=Bridge.Array.init(n.length,0);this.m_length=n.length*Bridge.Collections.BitArray.BitsPerInt32|0;Bridge.Array.copy(n,0,this.m_array,0,n.length);this._version=0},constructor$2:function(n){if(n==null)throw new Bridge.ArgumentNullException("bits");var t=Bridge.Collections.BitArray.getArrayLength(n.m_length,Bridge.Collections.BitArray.BitsPerInt32);this.m_array=Bridge.Array.init(t,0);this.m_length=n.m_length;Bridge.Array.copy(n.m_array,0,this.m_array,0,t);this._version=n._version},getItem:function(n){return this.get(n)},setItem:function(n,t){this.set(n,t)},getLength:function(){return this.m_length},setLength:function(n){var t,r,i,u;if(n<0)throw new Bridge.ArgumentOutOfRangeException("value","Non-negative number required.");t=Bridge.Collections.BitArray.getArrayLength(n,Bridge.Collections.BitArray.BitsPerInt32);(t>this.m_array.length||(t+Bridge.Collections.BitArray._ShrinkThreshold|0)<this.m_array.length)&&(r=Bridge.Array.init(t,0),Bridge.Array.copy(this.m_array,0,r,0,t>this.m_array.length?this.m_array.length:t),this.m_array=r);n>this.m_length&&(i=Bridge.Collections.BitArray.getArrayLength(this.m_length,Bridge.Collections.BitArray.BitsPerInt32)-1|0,u=this.m_length%32,u>0&&(this.m_array[i]=this.m_array[i]&((1<<u)-1|0)),Bridge.Array.fill(this.m_array,0,i+1|0,(t-i|0)-1|0));this.m_length=n;this._version=this._version+1|0},getCount:function(){return this.m_length},getIsReadOnly:function(){return!1},getIsSynchronized:function(){return!1},get:function(n){if(n<0||n>=this.getLength())throw new Bridge.ArgumentOutOfRangeException("index","Index was out of range. Must be non-negative and less than the size of the collection.");return(this.m_array[Bridge.Int.div(n,32)|0]&1<<n%32)!=0},set:function(n,t){if(n<0||n>=this.getLength())throw new Bridge.ArgumentOutOfRangeException("index","Index was out of range. Must be non-negative and less than the size of the collection.");this.m_array[Bridge.Int.div(n,32)|0]=t?this.m_array[Bridge.Int.div(n,32)|0]|1<<n%32:this.m_array[Bridge.Int.div(n,32)|0]&~(1<<n%32);this._version=this._version+1|0},setAll:function(n){for(var i=n?-1:0,r=Bridge.Collections.BitArray.getArrayLength(this.m_length,Bridge.Collections.BitArray.BitsPerInt32),t=0;t<r;t=t+1|0)this.m_array[t]=i;this._version=this._version+1|0},and:function(n){var i,t;if(n==null)throw new Bridge.ArgumentNullException("value");if(this.getLength()!==n.getLength())throw new Bridge.ArgumentException("Array lengths must be the same.");for(i=Bridge.Collections.BitArray.getArrayLength(this.m_length,Bridge.Collections.BitArray.BitsPerInt32),t=0;t<i;t=t+1|0)this.m_array[t]=this.m_array[t]&n.m_array[t];return this._version=this._version+1|0,this},or:function(n){var i,t;if(n==null)throw new Bridge.ArgumentNullException("value");if(this.getLength()!==n.getLength())throw new Bridge.ArgumentException("Array lengths must be the same.");for(i=Bridge.Collections.BitArray.getArrayLength(this.m_length,Bridge.Collections.BitArray.BitsPerInt32),t=0;t<i;t=t+1|0)this.m_array[t]=this.m_array[t]|n.m_array[t];return this._version=this._version+1|0,this},xor:function(n){var i,t;if(n==null)throw new Bridge.ArgumentNullException("value");if(this.getLength()!==n.getLength())throw new Bridge.ArgumentException("Array lengths must be the same.");for(i=Bridge.Collections.BitArray.getArrayLength(this.m_length,Bridge.Collections.BitArray.BitsPerInt32),t=0;t<i;t=t+1|0)this.m_array[t]=this.m_array[t]^n.m_array[t];return this._version=this._version+1|0,this},not:function(){for(var t=Bridge.Collections.BitArray.getArrayLength(this.m_length,Bridge.Collections.BitArray.BitsPerInt32),n=0;n<t;n=n+1|0)this.m_array[n]=~this.m_array[n];return this._version=this._version+1|0,this},clone:function(){var n=new Bridge.Collections.BitArray("constructor$5",this.m_array);return n._version=this._version,n.m_length=this.m_length,n},getEnumerator:function(){return new Bridge.Collections.BitArray.BitArrayEnumeratorSimple(this)}});Bridge.define("Bridge.Collections.BitArray.BitArrayEnumeratorSimple",{inherits:[Bridge.IEnumerator],bitarray:null,index:0,version:0,currentElement:!1,constructor:function(n){this.bitarray=n;this.index=-1;this.version=n._version},getCurrent:function(){if(this.index===-1)throw new Bridge.InvalidOperationException("Enumeration has not started. Call MoveNext.");if(this.index>=this.bitarray.getCount())throw new Bridge.InvalidOperationException("Enumeration already finished.");return this.currentElement},moveNext:function(){if(this.version!==this.bitarray._version)throw new Bridge.InvalidOperationException("Collection was modified; enumeration operation may not execute.");return this.index<(this.bitarray.getCount()-1|0)?(this.index=this.index+1|0,this.currentElement=this.bitarray.get(this.index),!0):(this.index=this.bitarray.getCount(),!1)},reset:function(){if(this.version!==this.bitarray._version)throw new Bridge.InvalidOperationException("Collection was modified; enumeration operation may not execute.");this.index=-1}});Bridge.define("Bridge.Collections.BitHelper",{statics:{MarkedBitFlag:1,IntSize:32,toIntArrayLength:function(n){return n>0?(Bridge.Int.div(n-1|0,Bridge.Collections.BitHelper.IntSize)|0)+1|0:0}},_length:0,_array:null,constructor:function(n,t){this._array=n;this._length=t},markBit:function(n){var t=Bridge.Int.div(n,Bridge.Collections.BitHelper.IntSize)|0,i;t<this._length&&t>=0&&(i=Bridge.Collections.BitHelper.MarkedBitFlag<<n%Bridge.Collections.BitHelper.IntSize,this._array[t]=this._array[t]|i)},isMarked:function(n){var t=Bridge.Int.div(n,Bridge.Collections.BitHelper.IntSize)|0,i;return t<this._length&&t>=0?(i=Bridge.Collections.BitHelper.MarkedBitFlag<<n%Bridge.Collections.BitHelper.IntSize,(this._array[t]&i)!=0):!1}});Bridge.define("Bridge.Collections.EnumerableHelpers",{statics:{toArray:function(n,t){var i={},r={v:Bridge.Collections.EnumerableHelpers.toArray$1(n,t,i)};return Bridge.Array.resize(r,i.v,null),r.v},toArray$1:function(n,t,i){var u=Bridge.getEnumerator(t,"$1"),s,f,r,e,o;try{if(u.moveNext()){for(s=4,f={v:Bridge.Array.init(s,null)},f.v[0]=u.getCurrent$1(),r=1;u.moveNext();)r===f.v.length&&(e=2146435071,o=r<<1,o>>>0>e&&(o=e<=r?r+1|0:e),Bridge.Array.resize(f,o,null)),f.v[Bridge.identity(r,r=r+1|0)]=u.getCurrent$1();return i.v=r,f.v}}finally{Bridge.hasValue(u)&&u.dispose()}return i.v=0,Bridge.Array.init(0,null)}}});Bridge.define("Bridge.Collections.HashHelpers",{statics:{HashPrime:101,primes:null,MaxPrimeArrayLength:2146435069,config:{init:function(){this.primes=[3,7,11,17,23,29,37,47,59,71,89,107,131,163,197,239,293,353,431,521,631,761,919,1103,1327,1597,1931,2333,2801,3371,4049,4861,5839,7013,8419,10103,12143,14591,17519,21023,25229,30293,36353,43627,52361,62851,75431,90523,108631,130363,156437,187751,225307,270371,324449,389357,467237,560689,672827,807403,968897,1162687,1395263,1674319,2009191,2411033,2893249,3471899,4166287,4999559,5999471,7199369]}},isPrime:function(n){var i,t;if((n&1)!=0){for(i=Bridge.Int.clip32(Math.sqrt(n)),t=3;t<=i;t=t+2|0)if(n%t==0)return!1;return!0}return n===2},getPrime:function(n){var i,r,t;if(n<0)throw new Bridge.ArgumentException("Hashtable's capacity overflowed and went negative. Check load factor, capacity and the current size of the table.");for(i=0;i<Bridge.Collections.HashHelpers.primes.length;i=i+1|0)if(r=Bridge.Collections.HashHelpers.primes[i],r>=n)return r;for(t=n|1;t<2147483647;t=t+2|0)if(Bridge.Collections.HashHelpers.isPrime(t)&&(t-1|0)%Bridge.Collections.HashHelpers.HashPrime!=0)return t;return n},getMinPrime:function(){return Bridge.Collections.HashHelpers.primes[0]},expandPrime:function(n){var t=2*n|0;return t>>>0>Bridge.Collections.HashHelpers.MaxPrimeArrayLength&&Bridge.Collections.HashHelpers.MaxPrimeArrayLength>n?Bridge.Collections.HashHelpers.MaxPrimeArrayLength:Bridge.Collections.HashHelpers.getPrime(t)}}});Bridge.define("Bridge.Collections.HashSet$1",function(n){return{inherits:[Bridge.ICollection$1(n),Bridge.ISet$1(n)],statics:{Lower31BitMask:2147483647,ShrinkThreshold:3,hashSetEquals:function(t,i,r){var u,f,e,s,h,o,c;if(t==null)return i==null;if(i==null)return!1;if(Bridge.Collections.HashSet$1(n).areEqualityComparersEqual(t,i)){if(t.getCount()!==i.getCount())return!1;for(u=Bridge.getEnumerator(i);u.moveNext();)if(s=u.getCurrent(),!t.contains(s))return!1;return!0}for(f=Bridge.getEnumerator(i);f.moveNext();){for(h=f.getCurrent(),o=!1,e=Bridge.getEnumerator(t);e.moveNext();)if(c=e.getCurrent(),r.equals(h,c)){o=!0;break}if(!o)return!1}return!0},areEqualityComparersEqual:function(n,t){return Bridge.equals(n.getComparer(),t.getComparer())}},_buckets:null,_slots:null,_count:0,_lastIndex:0,_freeList:0,_comparer:null,_version:0,constructor:function(){Bridge.Collections.HashSet$1(n).prototype.constructor$3.call(this,new Bridge.EqualityComparer$1(n)())},constructor$3:function(t){t==null&&(t=new Bridge.EqualityComparer$1(n)());this._comparer=t;this._lastIndex=0;this._count=0;this._freeList=-1;this._version=0},constructor$1:function(t){Bridge.Collections.HashSet$1(n).prototype.constructor$2.call(this,t,new Bridge.EqualityComparer$1(n)())},constructor$2:function(t,i){if(Bridge.Collections.HashSet$1(n).prototype.constructor$3.call(this,i),t==null)throw new Bridge.ArgumentNullException("collection");var r=0,u=Bridge.as(t,Bridge.ICollection$1(n));u!=null&&(r=Bridge.Array.getCount(u));this.initialize(r);this.unionWith(t);(this._count===0&&this._slots.length>Bridge.Collections.HashHelpers.getMinPrime()||this._count>0&&(Bridge.Int.div(this._slots.length,this._count)|0)>Bridge.Collections.HashSet$1(n).ShrinkThreshold)&&this.trimExcess()},getCount:function(){return this._count},getComparer:function(){return this._comparer},add:function(n){this.addIfNotPresent(n)},add$1:function(n){return this.addIfNotPresent(n)},clear:function(){var t,i;if(this._lastIndex>0){for(t=0;t<this._lastIndex;t=t+1|0)this._slots[t]=new Bridge.Collections.HashSet$1.Slot(n)();for(i=0;i<this._buckets.length;i=i+1|0)this._buckets[i]=0;this._lastIndex=0;this._count=0;this._freeList=-1}this._version=this._version+1|0},arrayClear:function(){},contains:function(n){var i,t;if(this._buckets!=null)for(i=this.internalGetHashCode(n),t=this._buckets[i%this._buckets.length]-1|0;t>=0;t=this._slots[t].next)if(this._slots[t].hashCode===i&&this._comparer.equals(this._slots[t].value,n))return!0;return!1},copyTo$1:function(n,t){this.copyTo$2(n,t,this._count)},copyTo:function(n){this.copyTo$2(n,0,this._count)},copyTo$2:function(n,t,i){var u,r;if(n==null)throw new Bridge.ArgumentNullException("array");if(t<0)throw new Bridge.ArgumentOutOfRangeException("arrayIndex");if(i<0)throw new Bridge.ArgumentOutOfRangeException("count");if(t>n.length||i>(n.length-t|0))throw new Bridge.ArgumentException("Destination array is not long enough to copy all the items in the collection. Check array index and length.");for(u=0,r=0;r<this._lastIndex&&u<i;r=r+1|0)this._slots[r].hashCode>=0&&(n[t+u|0]=this._slots[r].value,u=u+1|0)},remove:function(t){var i;if(this._buckets!=null){var u=this.internalGetHashCode(t),f=u%this._buckets.length,r=-1;for(i=this._buckets[f]-1|0;i>=0;r=i,i=this._slots[i].next)if(this._slots[i].hashCode===u&&this._comparer.equals(this._slots[i].value,t))return r<0?this._buckets[f]=this._slots[i].next+1|0:this._slots[r].next=this._slots[i].next,this._slots[i].hashCode=-1,this._slots[i].value=Bridge.getDefaultValue(n),this._slots[i].next=this._freeList,this._count=this._count-1|0,this._version=this._version+1|0,this._count===0?(this._lastIndex=0,this._freeList=-1):this._freeList=i,!0}return!1},getEnumerator$2:function(){return new Bridge.Collections.HashSet$1.Enumerator(n)("constructor$1",this)},getEnumerator$1:function(){return new Bridge.Collections.HashSet$1.Enumerator(n)("constructor$1",this)},getEnumerator:function(){return new Bridge.Collections.HashSet$1.Enumerator(n)("constructor$1",this)},unionWith:function(n){var t,i;if(n==null)throw new Bridge.ArgumentNullException("other");for(t=Bridge.getEnumerator(n);t.moveNext();)i=t.getCurrent(),this.addIfNotPresent(i)},intersectWith:function(t){var r,i;if(t==null)throw new Bridge.ArgumentNullException("other");if(this._count!==0){if(r=Bridge.as(t,Bridge.ICollection$1(n)),r!=null){if(Bridge.Array.getCount(r)===0){this.clear();return}if(i=Bridge.as(t,Bridge.Collections.HashSet$1(n)),i!=null&&Bridge.Collections.HashSet$1(n).areEqualityComparersEqual(this,i)){this.intersectWithHashSetWithSameEC(i);return}}this.intersectWithEnumerable(t)}},exceptWith:function(n){var t,i;if(n==null)throw new Bridge.ArgumentNullException("other");if(this._count!==0){if(Bridge.referenceEquals(n,this)){this.clear();return}for(t=Bridge.getEnumerator(n);t.moveNext();)i=t.getCurrent(),this.remove(i)}},symmetricExceptWith:function(t){if(t==null)throw new Bridge.ArgumentNullException("other");if(this._count===0){this.unionWith(t);return}if(Bridge.referenceEquals(t,this)){this.clear();return}var i=Bridge.as(t,Bridge.Collections.HashSet$1(n));i!=null&&Bridge.Collections.HashSet$1(n).areEqualityComparersEqual(this,i)?this.symmetricExceptWithUniqueHashSet(i):this.symmetricExceptWithEnumerable(t)},isSubsetOf:function(t){var i,r;if(t==null)throw new Bridge.ArgumentNullException("other");return this._count===0?!0:(i=Bridge.as(t,Bridge.Collections.HashSet$1(n)),i!=null&&Bridge.Collections.HashSet$1(n).areEqualityComparersEqual(this,i)?this._count>i.getCount()?!1:this.isSubsetOfHashSetWithSameEC(i):(r=this.checkUniqueAndUnfoundElements(t,!1).$clone(),r.uniqueCount===this._count&&r.unfoundCount>=0))},isProperSubsetOf:function(t){var r,i,u;if(t==null)throw new Bridge.ArgumentNullException("other");if(r=Bridge.as(t,Bridge.ICollection$1(n)),r!=null){if(this._count===0)return Bridge.Array.getCount(r)>0;if(i=Bridge.as(t,Bridge.Collections.HashSet$1(n)),i!=null&&Bridge.Collections.HashSet$1(n).areEqualityComparersEqual(this,i))return this._count>=i.getCount()?!1:this.isSubsetOfHashSetWithSameEC(i)}return u=this.checkUniqueAndUnfoundElements(t,!1).$clone(),u.uniqueCount===this._count&&u.unfoundCount>0},isSupersetOf:function(t){var r,i;if(t==null)throw new Bridge.ArgumentNullException("other");if(r=Bridge.as(t,Bridge.ICollection$1(n)),r!=null){if(Bridge.Array.getCount(r)===0)return!0;if(i=Bridge.as(t,Bridge.Collections.HashSet$1(n)),i!=null&&Bridge.Collections.HashSet$1(n).areEqualityComparersEqual(this,i)&&i.getCount()>this._count)return!1}return this.containsAllElements(t)},isProperSupersetOf:function(t){var r,i,u;if(t==null)throw new Bridge.ArgumentNullException("other");if(this._count===0)return!1;if(r=Bridge.as(t,Bridge.ICollection$1(n)),r!=null){if(Bridge.Array.getCount(r)===0)return!0;if(i=Bridge.as(t,Bridge.Collections.HashSet$1(n)),i!=null&&Bridge.Collections.HashSet$1(n).areEqualityComparersEqual(this,i))return i.getCount()>=this._count?!1:this.containsAllElements(i)}return u=this.checkUniqueAndUnfoundElements(t,!0).$clone(),u.uniqueCount<this._count&&u.unfoundCount===0},overlaps:function(n){var t,i;if(n==null)throw new Bridge.ArgumentNullException("other");if(this._count===0)return!1;for(t=Bridge.getEnumerator(n);t.moveNext();)if(i=t.getCurrent(),this.contains(i))return!0;return!1},setEquals:function(t){var i,r,u;if(t==null)throw new Bridge.ArgumentNullException("other");return i=Bridge.as(t,Bridge.Collections.HashSet$1(n)),i!=null&&Bridge.Collections.HashSet$1(n).areEqualityComparersEqual(this,i)?this._count!==i.getCount()?!1:this.containsAllElements(i):(r=Bridge.as(t,Bridge.ICollection$1(n)),r!=null&&this._count===0&&Bridge.Array.getCount(r)>0)?!1:(u=this.checkUniqueAndUnfoundElements(t,!0).$clone(),u.uniqueCount===this._count&&u.unfoundCount===0)},removeWhere:function(n){var i,t,r;if(n==null)throw new Bridge.ArgumentNullException("match");for(i=0,t=0;t<this._lastIndex;t=t+1|0)this._slots[t].hashCode>=0&&(r=this._slots[t].value,n(r)&&this.remove(r)&&(i=i+1|0));return i},trimExcess:function(){var i,e;if(this._count===0)this._buckets=null,this._slots=null,this._version=this._version+1|0;else{var u=Bridge.Collections.HashHelpers.getPrime(this._count),r=Bridge.Array.init(u,function(){return new Bridge.Collections.HashSet$1.Slot(n)()}),f=Bridge.Array.init(u,0),t=0;for(i=0;i<this._lastIndex;i=i+1|0)this._slots[i].hashCode>=0&&(r[t]=this._slots[i].$clone(),e=r[t].hashCode%u,r[t].next=f[e]-1|0,f[e]=t+1|0,t=t+1|0);this._lastIndex=t;this._slots=r;this._buckets=f;this._freeList=-1}},initialize:function(t){var i=Bridge.Collections.HashHelpers.getPrime(t);this._buckets=Bridge.Array.init(i,0);this._slots=Bridge.Array.init(i,function(){return new Bridge.Collections.HashSet$1.Slot(n)()})},increaseCapacity:function(){var n=Bridge.Collections.HashHelpers.expandPrime(this._count);if(n<=this._count)throw new Bridge.ArgumentException("HashSet capacity is too big.");this.setCapacity(n,!1)},setCapacity:function(t,i){var r=Bridge.Array.init(t,function(){return new Bridge.Collections.HashSet$1.Slot(n)()}),e,u,o,f,s;if(this._slots!=null)for(e=0;e<this._lastIndex;e=e+1|0)r[e]=this._slots[e].$clone();if(i)for(u=0;u<this._lastIndex;u=u+1|0)r[u].hashCode!==-1&&(r[u].hashCode=this.internalGetHashCode(r[u].value));for(o=Bridge.Array.init(t,0),f=0;f<this._lastIndex;f=f+1|0)s=r[f].hashCode%t,r[f].next=o[s]-1|0,o[s]=f+1|0;this._slots=r;this._buckets=o},addIfNotPresent:function(n){var r,u,i,t;for(this._buckets==null&&this.initialize(0),r=this.internalGetHashCode(n),u=r%this._buckets.length,i=this._buckets[u]-1|0;i>=0;i=this._slots[i].next)if(this._slots[i].hashCode===r&&this._comparer.equals(this._slots[i].value,n))return!1;return this._freeList>=0?(t=this._freeList,this._freeList=this._slots[t].next):(this._lastIndex===this._slots.length&&(this.increaseCapacity(),u=r%this._buckets.length),t=this._lastIndex,this._lastIndex=this._lastIndex+1|0),this._slots[t].hashCode=r,this._slots[t].value=n,this._slots[t].next=this._buckets[u]-1|0,this._buckets[u]=t+1|0,this._count=this._count+1|0,this._version=this._version+1|0,!0},containsAllElements:function(n){for(var i,t=Bridge.getEnumerator(n);t.moveNext();)if(i=t.getCurrent(),!this.contains(i))return!1;return!0},isSubsetOfHashSetWithSameEC:function(n){for(var i,t=Bridge.getEnumerator(this);t.moveNext();)if(i=t.getCurrent(),!n.contains(i))return!1;return!0},intersectWithHashSetWithSameEC:function(n){for(var i,t=0;t<this._lastIndex;t=t+1|0)this._slots[t].hashCode>=0&&(i=this._slots[t].value,n.contains(i)||this.remove(i))},intersectWithEnumerable:function(n){for(var f=this._lastIndex,e=Bridge.Collections.BitHelper.toIntArrayLength(f),s=Bridge.Array.init(e,0),o,u,t,r=new Bridge.Collections.BitHelper(s,e),i=Bridge.getEnumerator(n);i.moveNext();)o=i.getCurrent(),u=this.internalIndexOf(o),u>=0&&r.markBit(u);for(t=0;t<f;t=t+1|0)this._slots[t].hashCode>=0&&!r.isMarked(t)&&this.remove(this._slots[t].value)},internalIndexOf:function(n){for(var i=this.internalGetHashCode(n),t=this._buckets[i%this._buckets.length]-1|0;t>=0;t=this._slots[t].next)if(this._slots[t].hashCode===i&&this._comparer.equals(this._slots[t].value,n))return t;return-1},symmetricExceptWithUniqueHashSet:function(n){for(var i,t=Bridge.getEnumerator(n);t.moveNext();)i=t.getCurrent(),this.remove(i)||this.addIfNotPresent(i)},symmetricExceptWithEnumerable:function(n){var u,f=this._lastIndex,r=Bridge.Collections.BitHelper.toIntArrayLength(f),e,o,h=Bridge.Array.init(r,0),s,t;for(e=new Bridge.Collections.BitHelper(h,r),s=Bridge.Array.init(r,0),o=new Bridge.Collections.BitHelper(s,r),u=Bridge.getEnumerator(n);u.moveNext();){var c=u.getCurrent(),i={v:0},l=this.addOrGetLocation(c,i);l?o.markBit(i.v):i.v<f&&!o.isMarked(i.v)&&e.markBit(i.v)}for(t=0;t<f;t=t+1|0)e.isMarked(t)&&this.remove(this._slots[t].value)},addOrGetLocation:function(n,t){for(var i,u=this.internalGetHashCode(n),f=u%this._buckets.length,r=this._buckets[f]-1|0;r>=0;r=this._slots[r].next)if(this._slots[r].hashCode===u&&this._comparer.equals(this._slots[r].value,n))return t.v=r,!1;return this._freeList>=0?(i=this._freeList,this._freeList=this._slots[i].next):(this._lastIndex===this._slots.length&&(this.increaseCapacity(),f=u%this._buckets.length),i=this._lastIndex,this._lastIndex=this._lastIndex+1|0),this._slots[i].hashCode=u,this._slots[i].value=n,this._slots[i].next=this._buckets[f]-1|0,this._buckets[f]=i+1|0,this._count=this._count+1|0,this._version=this._version+1|0,t.v=i,!0},checkUniqueAndUnfoundElements:function(t,i){var s,h,r=new Bridge.Collections.HashSet$1.ElementCount(n)(),u,v,f,e,a,o;if(this._count===0){for(u=0,s=Bridge.getEnumerator(t);s.moveNext();){v=s.getCurrent();u=u+1|0;break}return r.uniqueCount=0,r.unfoundCount=u,r.$clone()}var y=this._lastIndex,l=Bridge.Collections.BitHelper.toIntArrayLength(y),c,p=Bridge.Array.init(l,0);for(c=new Bridge.Collections.BitHelper(p,l),f=0,e=0,h=Bridge.getEnumerator(t);h.moveNext();)if(a=h.getCurrent(),o=this.internalIndexOf(a),o>=0)c.isMarked(o)||(c.markBit(o),e=e+1|0);else if(f=f+1|0,i)break;return r.uniqueCount=e,r.unfoundCount=f,r.$clone()},toArray:function(){var n=Bridge.Array.init(this.getCount(),null);return this.copyTo(n),n},internalGetHashCode:function(t){return t==null?0:this._comparer.getHashCode(t,!0)&Bridge.Collections.HashSet$1(n).Lower31BitMask}}});Bridge.define("Bridge.Collections.HashSet$1.ElementCount",function(n){return{statics:{getDefaultValue:function(){return new Bridge.Collections.HashSet$1.ElementCount(n)()}},uniqueCount:0,unfoundCount:0,constructor:function(){},getHashCode:function(){var n=17;return n=n*23+(this.uniqueCount==null?0:Bridge.getHashCode(this.uniqueCount)),n*23+(this.unfoundCount==null?0:Bridge.getHashCode(this.unfoundCount))},equals:function(t){return Bridge.is(t,Bridge.Collections.HashSet$1.ElementCount(n))?Bridge.equals(this.uniqueCount,t.uniqueCount)&&Bridge.equals(this.unfoundCount,t.unfoundCount):!1},$clone:function(t){var i=t||new Bridge.Collections.HashSet$1.ElementCount(n)();return i.uniqueCount=this.uniqueCount,i.unfoundCount=this.unfoundCount,i}}});Bridge.define("Bridge.Collections.HashSet$1.Enumerator",function(n){return{inherits:[Bridge.IEnumerator$1(n)],statics:{getDefaultValue:function(){return new Bridge.Collections.HashSet$1.Enumerator(n)()}},_set:null,_index:0,_version:0,_current:null,constructor$1:function(t){this._set=t;this._index=0;this._version=t._version;this._current=Bridge.getDefaultValue(n)},constructor:function(){},getCurrent$1:function(){return this._current},getCurrent:function(){if(this._index===0||this._index===(this._set._lastIndex+1|0))throw new Bridge.InvalidOperationException("Enumeration has either not started or has already finished.");return this.getCurrent$1()},dispose:function(){},moveNext:function(){if(this._version!==this._set._version)throw new Bridge.InvalidOperationException("Collection was modified; enumeration operation may not execute.");while(this._index<this._set._lastIndex){if(this._set._slots[this._index].hashCode>=0)return this._current=this._set._slots[this._index].value,this._index=this._index+1|0,!0;this._index=this._index+1|0}return this._index=this._set._lastIndex+1|0,this._current=Bridge.getDefaultValue(n),!1},reset:function(){if(this._version!==this._set._version)throw new Bridge.InvalidOperationException("Collection was modified; enumeration operation may not execute.");this._index=0;this._current=Bridge.getDefaultValue(n)},getHashCode:function(){var n=17;return n=n*23+(this._set==null?0:Bridge.getHashCode(this._set)),n=n*23+(this._index==null?0:Bridge.getHashCode(this._index)),n=n*23+(this._version==null?0:Bridge.getHashCode(this._version)),n*23+(this._current==null?0:Bridge.getHashCode(this._current))},equals:function(t){return Bridge.is(t,Bridge.Collections.HashSet$1.Enumerator(n))?Bridge.equals(this._set,t._set)&&Bridge.equals(this._index,t._index)&&Bridge.equals(this._version,t._version)&&Bridge.equals(this._current,t._current):!1},$clone:function(t){var i=t||new Bridge.Collections.HashSet$1.Enumerator(n)();return i._set=this._set,i._index=this._index,i._version=this._version,i._current=this._current,i}}});Bridge.define("Bridge.Collections.HashSet$1.Slot",function(n){return{statics:{getDefaultValue:function(){return new Bridge.Collections.HashSet$1.Slot(n)()}},hashCode:0,value:null,next:0,constructor:function(){},getHashCode:function(){var n=17;return n=n*23+(this.hashCode==null?0:Bridge.getHashCode(this.hashCode)),n=n*23+(this.value==null?0:Bridge.getHashCode(this.value)),n*23+(this.next==null?0:Bridge.getHashCode(this.next))},equals:function(t){return Bridge.is(t,Bridge.Collections.HashSet$1.Slot(n))?Bridge.equals(this.hashCode,t.hashCode)&&Bridge.equals(this.value,t.value)&&Bridge.equals(this.next,t.next):!1},$clone:function(t){var i=t||new Bridge.Collections.HashSet$1.Slot(n)();return i.hashCode=this.hashCode,i.value=this.value,i.next=this.next,i}}});Bridge.define("Bridge.Collections.Queue$1",function(n){return{inherits:[Bridge.IEnumerable$1(n),Bridge.ICollection],statics:{MinimumGrow:4,GrowFactor:200,DefaultCapacity:4},_array:null,_head:0,_tail:0,_size:0,_version:0,constructor:function(){this._array=Bridge.Array.init(0,null)},constructor$2:function(n){if(n<0)throw new Bridge.ArgumentOutOfRangeException("capacity","Non-negative number required.");this._array=Bridge.Array.init(n,null)},constructor$1:function(t){if(t==null)throw new Bridge.ArgumentNullException("collection");this._array=Bridge.Array.init(Bridge.Collections.Queue$1(n).DefaultCapacity,null);var i=Bridge.getEnumerator(t,"$1");try{while(i.moveNext())this.enqueue(i.getCurrent$1())}finally{Bridge.hasValue(i)&&i.dispose()}},getCount:function(){return this._size},clear:function(){this._head<this._tail?Bridge.Array.fill(this._array,null,this._head,this._size):(Bridge.Array.fill(this._array,null,this._head,this._array.length-this._head|0),Bridge.Array.fill(this._array,null,0,this._tail));this._head=0;this._tail=0;this._size=0;this._version=this._version+1|0},copyTo:function(n,t){var r,i,u;if(n==null)throw new Bridge.ArgumentNullException("array");if(t<0||t>n.length)throw new Bridge.ArgumentOutOfRangeException("arrayIndex","Index was out of range. Must be non-negative and less than the size of the collection.");if(r=n.length,(r-t|0)<this._size)throw new Bridge.ArgumentException("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");(i=(r-t|0)<this._size?r-t|0:this._size,i!==0)&&(u=(this._array.length-this._head|0)<i?this._array.length-this._head|0:i,Bridge.Array.copy(this._array,this._head,n,t,u),i=i-u|0,i>0&&Bridge.Array.copy(this._array,0,n,(t+this._array.length|0)-this._head|0,i))},enqueue:function(t){if(this._size===this._array.length){var i=Bridge.Int.div(this._array.length*Bridge.Collections.Queue$1(n).GrowFactor|0,100)|0;i<(this._array.length+Bridge.Collections.Queue$1(n).MinimumGrow|0)&&(i=this._array.length+Bridge.Collections.Queue$1(n).MinimumGrow|0);this.setCapacity(i)}this._array[this._tail]=t;this._tail=this.moveNext(this._tail);this._size=this._size+1|0;this._version=this._version+1|0},getEnumerator$2:function(){return new Bridge.Collections.Queue$1.Enumerator(n)("constructor$1",this)},getEnumerator$1:function(){return new Bridge.Collections.Queue$1.Enumerator(n)("constructor$1",this)},getEnumerator:function(){return new Bridge.Collections.Queue$1.Enumerator(n)("constructor$1",this)},dequeue:function(){if(this._size===0)throw new Bridge.InvalidOperationException("Queue empty.");var t=this._array[this._head];return this._array[this._head]=Bridge.getDefaultValue(n),this._head=this.moveNext(this._head),this._size=this._size-1|0,this._version=this._version+1|0,t},peek:function(){if(this._size===0)throw new Bridge.InvalidOperationException("Queue empty.");return this._array[this._head]},contains:function(t){for(var i=this._head,r=this._size,u=new Bridge.EqualityComparer$1(n)();Bridge.identity(r,r=r-1|0)>0;){if(t==null){if(this._array[i]==null)return!0}else if(this._array[i]!=null&&u.equals(this._array[i],t))return!0;i=this.moveNext(i)}return!1},getElement:function(n){return this._array[(this._head+n|0)%this._array.length]},toArray:function(){var n=Bridge.Array.init(this._size,null);return this._size===0?n:(this._head<this._tail?Bridge.Array.copy(this._array,this._head,n,0,this._size):(Bridge.Array.copy(this._array,this._head,n,0,this._array.length-this._head|0),Bridge.Array.copy(this._array,0,n,this._array.length-this._head|0,this._tail)),n)},setCapacity:function(n){var t=Bridge.Array.init(n,null);this._size>0&&(this._head<this._tail?Bridge.Array.copy(this._array,this._head,t,0,this._size):(Bridge.Array.copy(this._array,this._head,t,0,this._array.length-this._head|0),Bridge.Array.copy(this._array,0,t,this._array.length-this._head|0,this._tail)));this._array=t;this._head=0;this._tail=this._size===n?0:this._size;this._version=this._version+1|0},moveNext:function(n){var t=n+1|0;return t===this._array.length?0:t},trimExcess:function(){var n=Bridge.Int.clip32(this._array.length*.9);this._size<n&&this.setCapacity(this._size)}}});Bridge.define("Bridge.Collections.Queue$1.Enumerator",function(n){return{inherits:[Bridge.IEnumerator$1(n),Bridge.IEnumerator],statics:{getDefaultValue:function(){return new Bridge.Collections.Queue$1.Enumerator(n)()}},_q:null,_index:0,_version:0,_currentElement:null,constructor$1:function(t){this._q=t;this._version=this._q._version;this._index=-1;this._currentElement=Bridge.getDefaultValue(n)},constructor:function(){},getCurrent$1:function(){if(this._index<0)if(this._index===-1)throw new Bridge.InvalidOperationException("Enumeration has not started. Call MoveNext.");else throw new Bridge.InvalidOperationException("Enumeration already finished.");return this._currentElement},getCurrent:function(){return this.getCurrent$1()},dispose:function(){this._index=-2;this._currentElement=Bridge.getDefaultValue(n)},moveNext:function(){if(this._version!==this._q._version)throw new Bridge.InvalidOperationException("Collection was modified; enumeration operation may not execute.");return this._index===-2?!1:(this._index=this._index+1|0,this._index===this._q._size)?(this._index=-2,this._currentElement=Bridge.getDefaultValue(n),!1):(this._currentElement=this._q.getElement(this._index),!0)},reset:function(){if(this._version!==this._q._version)throw new Bridge.InvalidOperationException("Collection was modified; enumeration operation may not execute.");this._index=-1;this._currentElement=Bridge.getDefaultValue(n)},getHashCode:function(){var n=17;return n=n*23+(this._q==null?0:Bridge.getHashCode(this._q)),n=n*23+(this._index==null?0:Bridge.getHashCode(this._index)),n=n*23+(this._version==null?0:Bridge.getHashCode(this._version)),n*23+(this._currentElement==null?0:Bridge.getHashCode(this._currentElement))},equals:function(t){return Bridge.is(t,Bridge.Collections.Queue$1.Enumerator(n))?Bridge.equals(this._q,t._q)&&Bridge.equals(this._index,t._index)&&Bridge.equals(this._version,t._version)&&Bridge.equals(this._currentElement,t._currentElement):!1},$clone:function(t){var i=t||new Bridge.Collections.Queue$1.Enumerator(n)();return i._q=this._q,i._index=this._index,i._version=this._version,i._currentElement=this._currentElement,i}}});Bridge.define("Bridge.Collections.Stack$1",function(n){return{inherits:[Bridge.IEnumerable$1(n),Bridge.ICollection],statics:{DefaultCapacity:4},_array:null,_size:0,_version:0,constructor:function(){this._array=Bridge.Array.init(0,null)},constructor$2:function(n){if(n<0)throw new Bridge.ArgumentOutOfRangeException("capacity","Non-negative number required.");this._array=Bridge.Array.init(n,null)},constructor$1:function(t){if(t==null)throw new Bridge.ArgumentNullException("collection");var i={};this._array=Bridge.Collections.EnumerableHelpers.toArray$1(n,t,i);this._size=i.v},getCount:function(){return this._size},clear:function(){Bridge.Array.fill(this._array,null,0,this._size);this._size=0;this._version=this._version+1|0},contains:function(t){for(var i=this._size,r=new Bridge.EqualityComparer$1(n)();Bridge.identity(i,i=i-1|0)>0;)if(t==null){if(this._array[i]==null)return!0}else if(this._array[i]!=null&&r.equals(this._array[i],t))return!0;return!1},copyTo:function(n,t){var i,u,r;if(n==null)throw new Bridge.ArgumentNullException("array");if(t<0||t>n.length)throw new Bridge.ArgumentOutOfRangeException("arrayIndex","Non-negative number required.");if((n.length-t|0)<this._size)throw new Bridge.ArgumentException("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");if(Bridge.referenceEquals(n,this._array))Bridge.Array.copy(this._array,0,n,t,this._size),Bridge.Array.reverse(n,t,this._size);else for(i=0,u=t+this._size|0,r=0;r<this._size;r=r+1|0)n[u=u-1|0]=this._array[Bridge.identity(i,i=i+1|0)]},copyTo$1:function(n,t){if(n==null)throw new Bridge.ArgumentNullException("array");if(Bridge.Array.getRank(n)!==1)throw new Bridge.ArgumentException("Only single dimensional arrays are supported for the requested action.");if(Bridge.Array.getLower(n,0)!==0)throw new Bridge.ArgumentException("The lower bound of target array must be zero.");if(t<0||t>n.length)throw new Bridge.ArgumentOutOfRangeException("arrayIndex","Non-negative number required.");if((n.length-t|0)<this._size)throw new Bridge.ArgumentException("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");try{Bridge.Array.copy(this._array,0,n,t,this._size);Bridge.Array.reverse(n,t,this._size)}catch(i){i=Bridge.Exception.create(i);throw new Bridge.ArgumentException("Target array type is not compatible with the type of items in the collection.");}},getEnumerator$2:function(){return new Bridge.Collections.Stack$1.Enumerator(n)("constructor$1",this)},getEnumerator$1:function(){return new Bridge.Collections.Stack$1.Enumerator(n)("constructor$1",this)},getEnumerator:function(){return new Bridge.Collections.Stack$1.Enumerator(n)("constructor$1",this)},trimExcess:function(){var t=Bridge.Int.clip32(this._array.length*.9),n;this._size<t&&(n={v:this._array},Bridge.Array.resize(n,this._size,null),this._array=n.v,this._version=this._version+1|0)},peek:function(){if(this._size===0)throw new Bridge.InvalidOperationException("Stack empty.");return this._array[this._size-1|0]},pop:function(){if(this._size===0)throw new Bridge.InvalidOperationException("Stack empty.");this._version=this._version+1|0;var t=this._array[this._size=this._size-1|0];return this._array[this._size]=Bridge.getDefaultValue(n),t},push:function(t){if(this._size===this._array.length){var i={v:this._array};Bridge.Array.resize(i,this._array.length===0?Bridge.Collections.Stack$1(n).DefaultCapacity:2*this._array.length|0,null);this._array=i.v}this._array[Bridge.identity(this._size,this._size=this._size+1|0)]=t;this._version=this._version+1|0},toArray:function(){for(var t=Bridge.Array.init(this._size,null),n=0;n<this._size;)t[n]=this._array[(this._size-n|0)-1|0],n=n+1|0;return t}}});Bridge.define("Bridge.Collections.Stack$1.Enumerator",function(n){return{inherits:[Bridge.IEnumerator$1(n),Bridge.IEnumerator],statics:{getDefaultValue:function(){return new Bridge.Collections.Stack$1.Enumerator(n)()}},_stack:null,_index:0,_version:0,_currentElement:null,constructor$1:function(t){this._stack=t;this._version=this._stack._version;this._index=-2;this._currentElement=Bridge.getDefaultValue(n)},constructor:function(){},getCurrent$1:function(){if(this._index===-2)throw new Bridge.InvalidOperationException("Enumeration has not started. Call MoveNext.");if(this._index===-1)throw new Bridge.InvalidOperationException("Enumeration already finished.");return this._currentElement},getCurrent:function(){if(this._index===-2)throw new Bridge.InvalidOperationException("Enumeration has not started. Call MoveNext.");if(this._index===-1)throw new Bridge.InvalidOperationException("Enumeration already finished.");return this._currentElement},dispose:function(){this._index=-1},moveNext:function(){var t;if(this._version!==this._stack._version)throw new Bridge.InvalidOperationException("Collection was modified; enumeration operation may not execute.");return this._index===-2?(this._index=this._stack._size-1|0,t=this._index>=0,t&&(this._currentElement=this._stack._array[this._index]),t):this._index===-1?!1:(t=(this._index=this._index-1|0)>=0,this._currentElement=t?this._stack._array[this._index]:Bridge.getDefaultValue(n),t)},reset:function(){if(this._version!==this._stack._version)throw new Bridge.InvalidOperationException("Collection was modified; enumeration operation may not execute.");this._index=-2;this._currentElement=Bridge.getDefaultValue(n)},getHashCode:function(){var n=17;return n=n*23+(this._stack==null?0:Bridge.getHashCode(this._stack)),n=n*23+(this._index==null?0:Bridge.getHashCode(this._index)),n=n*23+(this._version==null?0:Bridge.getHashCode(this._version)),n*23+(this._currentElement==null?0:Bridge.getHashCode(this._currentElement))},equals:function(t){return Bridge.is(t,Bridge.Collections.Stack$1.Enumerator(n))?Bridge.equals(this._stack,t._stack)&&Bridge.equals(this._index,t._index)&&Bridge.equals(this._version,t._version)&&Bridge.equals(this._currentElement,t._currentElement):!1},$clone:function(t){var i=t||new Bridge.Collections.Stack$1.Enumerator(n)();return i._stack=this._stack,i._index=this._index,i._version=this._version,i._currentElement=this._currentElement,i}}});Bridge.init()})(this);